/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("_pb_users_auth_")

  // update collection data
  unmarshal({
    "otp": {
      "emailTemplate": {
        "body": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>One-Time Password - {APP_NAME}</title>\n    <style>\n        /* General Body Styles */\n        body {\n            font-family: 'Montserrat', 'Inter', sans-serif;\n            line-height: 1.6;\n            color: #ffffff;\n            margin: 0;\n            padding: 0;\n            background-color: #f8f9fa;\n        }\n        /* Container for the email content */\n        .email-container {\n            max-width: 600px;\n            margin: 20px auto;\n            background-color: #ffffff;\n            border-radius: 12px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n        /* Header Section - 100% Opaque PUP Maroon */\n        .header {\n            background-color: #800000; /* PUP Maroon at 100% opacity */\n            color: #ffffff;\n            padding: 30px 25px;\n            text-align: center;\n            font-size: 28px;\n            font-weight: 800;\n            letter-spacing: 1px;\n            border-bottom: 3px solid #ffffff; /* Solid white line below the header */\n            line-height: 1.2;\n        }\n        /* Content Body Section - 100% Opaque Very Dark Maroon */\n        .content-body {\n            background-color: #260000; /* Very dark maroon/brown shade at 100% opacity */\n            color: #ffffff;\n            padding: 30px 25px;\n        }\n        /* Paragraph styles */\n        p {\n            margin-bottom: 15px;\n            font-size: 16px;\n            color: #ffffff;\n        }\n        /* OTP Code Specific Styling */\n        .otp-code {\n            display: block;\n            background-color: #ffffff; /* White background for the code itself */\n            color: #800000; /* Maroon text for the code */\n            font-size: 32px;\n            font-weight: bold;\n            text-align: center;\n            padding: 15px 10px;\n            margin: 25px auto;\n            border-radius: 8px;\n            letter-spacing: 4px;\n            max-width: 250px;\n        }\n        /* Footer Section */\n        .footer {\n            background-color: #f2f2f2;\n            color: #777777;\n            padding: 20px 25px;\n            font-size: 13px;\n            text-align: center;\n            border-top: 1px solid #e0e0e0;\n            border-bottom-left-radius: 12px;\n            border-bottom-right-radius: 12px;\n        }\n        .footer p {\n            margin: 5px 0;\n            color: #777777;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-container\">\n        <div class=\"header\">\n            {APP_NAME}\n        </div>\n        <div class=\"content-body\">\n            <p>Dear PUPTian,</p>\n            <p>Here is your One-Time Password (OTP) for your {APP_NAME} account:</p>\n            <div style=\"text-align: center;\">\n                <span class=\"otp-code\">{OTP}</span>\n            </div>\n            <p>Please enter this code on the login screen to proceed. For your security, this code is valid for a limited time and is for single use only.</p>\n            <p><strong>Do not share this code with anyone.</strong></p>\n            <p>If you did not attempt to log in or request this OTP, please contact our support team immediately.</p>\n            <p>Sincerely,</p>\n            <p>The {APP_NAME} Team</p>\n        </div>\n        <div class=\"footer\">\n            <p>&copy; 2025 {APP_NAME}. All rights reserved.</p>\n            <p>This is an automated email; please do not reply directly.</p>\n        </div>\n    </div>\n</body>\n</html>"
      }
    }
  }, collection)

  return app.save(collection)
}, (app) => {
  const collection = app.findCollectionByNameOrId("_pb_users_auth_")

  // update collection data
  unmarshal({
    "otp": {
      "emailTemplate": {
        "body": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>One-Time Password - {APP_NAME}</title>\n    <style>\n        /* General Body Styles */\n        body {\n            font-family: 'Montserrat', 'Inter', sans-serif;\n            line-height: 1.6;\n            color: #ffffff;\n            margin: 0;\n            padding: 0;\n            background-color: #f8f9fa;\n        }\n        /* Container for the email content */\n        .email-container {\n            max-width: 600px;\n            margin: 20px auto;\n            background-color: #ffffff;\n            border-radius: 12px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n        /* Header Section - 100% Opaque PUP Maroon */\n        .header {\n            background-color: #800000; /* PUP Maroon at 100% opacity */\n            color: #ffffff;\n            padding: 30px 25px;\n            text-align: center;\n            font-size: 28px;\n            font-weight: 800;\n            letter-spacing: 1px;\n            border-bottom: 3px solid #ffffff; /* Solid white line below the header */\n            line-height: 1.2;\n        }\n        /* Content Body Section - 100% Opaque Very Dark Maroon */\n        .content-body {\n            background-color: #260000; /* Very dark maroon/brown shade at 100% opacity */\n            color: #ffffff;\n            padding: 30px 25px;\n        }\n        /* Paragraph styles */\n        p {\n            margin-bottom: 15px;\n            font-size: 16px;\n            color: #ffffff;\n        }\n        /* OTP Code Specific Styling */\n        .otp-code {\n            display: block;\n            background-color: #ffffff; /* White background for the code itself */\n            color: #800000; /* Maroon text for the code */\n            font-size: 32px;\n            font-weight: bold;\n            text-align: center;\n            padding: 15px 10px;\n            margin: 25px auto;\n            border-radius: 8px;\n            letter-spacing: 4px;\n            max-width: 250px;\n        }\n        /* Footer Section */\n        .footer {\n            background-color: #f2f2f2;\n            color: #777777;\n            padding: 20px 25px;\n            font-size: 13px;\n            text-align: center;\n            border-top: 1px solid #e0e0e0;\n            border-bottom-left-radius: 12px;\n            border-bottom-right-radius: 12px;\n        }\n        .footer p {\n            margin: 5px 0;\n            color: #777777;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-container\">\n        <div class=\"header\">\n            {APP_NAME}\n        </div>\n        <div class=\"content-body\">\n            <p>Dear PUPTian,</p>\n            <p>Here is your One-Time Password (OTP) for your {APP_NAME} account:</p>\n            <div style=\"text-align: center;\">\n                <span class=\"otp-code\">{OTP_CODE}</span>\n            </div>\n            <p>Please enter this code on the login screen to proceed. For your security, this code is valid for a limited time and is for single use only.</p>\n            <p><strong>Do not share this code with anyone.</strong></p>\n            <p>If you did not attempt to log in or request this OTP, please contact our support team immediately.</p>\n            <p>Sincerely,</p>\n            <p>The {APP_NAME} Team</p>\n        </div>\n        <div class=\"footer\">\n            <p>&copy; 2025 {APP_NAME}. All rights reserved.</p>\n            <p>This is an automated email; please do not reply directly.</p>\n        </div>\n    </div>\n</body>\n</html>"
      }
    }
  }, collection)

  return app.save(collection)
})
