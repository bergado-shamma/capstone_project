/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("_pb_users_auth_")

  // update collection data
  unmarshal({
    "verificationTemplate": {
      "body": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Email Verification - {APP_NAME}</title>\n    <style>\n        /* General Body Styles */\n        body {\n            font-family: 'Montserrat', 'Inter', sans-serif;\n            line-height: 1.6;\n            color: #ffffff; /* Default text color set to white */\n            margin: 0;\n            padding: 0;\n            background-color: #f8f9fa; /* Light background for the overall email container */\n        }\n        /* Container for the email content */\n        .email-container {\n            max-width: 600px;\n            margin: 20px auto;\n            background-color: #ffffff; /* Base white for rounded corners, but content body will be dark */\n            border-radius: 12px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n        /* Header Section */\n        .header {\n            background-color: #800000; /* Deep PUP Maroon */\n            color: #ffffff;\n            padding: 30px 25px;\n            text-align: center;\n            font-size: 28px;\n            font-weight: 800;\n            letter-spacing: 1px;\n            border-bottom: 3px solid #ffffff; /* White line below the header for strong separation */\n            line-height: 1.2;\n        }\n        /* Content Body Section - Dark background for white text */\n        .content-body {\n            background-color: #260000; /* Very dark maroon/brown shade, close to black for contrast */\n            color: #ffffff; /* Text color inside content body */\n            padding: 30px 25px;\n        }\n        /* Paragraph styles */\n        p {\n            margin-bottom: 15px;\n            font-size: 16px;\n            color: #ffffff; /* Ensure paragraphs are white */\n        }\n        /* Button Styling */\n        .button-container {\n            text-align: center;\n            margin-top: 35px;\n            margin-bottom: 35px;\n        }\n        .button {\n            display: inline-block;\n            padding: 15px 30px;\n            background-color: #800000; /* PUP Maroon */\n            color: #ffffff !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-size: 18px;\n            font-weight: bold;\n            transition: background-color 0.3s ease;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n        }\n        .button:hover {\n            background-color: #660000; /* Darker maroon on hover */\n        }\n        /* Footer Section */\n        .footer {\n            background-color: #f2f2f2; /* Light grey footer - provides contrast with dark body */\n            color: #777777;\n            padding: 20px 25px;\n            font-size: 13px;\n            text-align: center;\n            border-top: 1px solid #e0e0e0;\n            border-bottom-left-radius: 12px;\n            border-bottom-right-radius: 12px;\n        }\n        .footer p {\n            margin: 5px 0;\n            color: #777777; /* Ensure footer text is dark grey */\n        }\n        .link {\n            color: #ffffff; /* Links within the dark body should be white */\n            text-decoration: none;\n        }\n        .link:hover {\n            text-decoration: underline;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-container\">\n        <div class=\"header\">\n            {APP_NAME}\n        </div>\n        <div class=\"content-body\">\n            <p>Dear PUPTian,</p>\n            <p>We are delighted to welcome you to {APP_NAME}. To complete your registration and activate your account, please verify your email address by clicking the button below.</p>\n            <p>Email verification is a crucial step to ensure the security and integrity of your account within our system.</p>\n            <div class=\"button-container\">\n                <a class=\"button\" href=\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\" target=\"_blank\" rel=\"noopener\">Verify Your Email Address</a>\n            </div>\n            <p>This verification link is valid for a limited time. Please complete the process promptly.</p>\n            <p>If you did not initiate this registration or believe this email was sent in error, please disregard this message. No action is required on your part if you did not sign up for an account with us.</p>\n            <p>Sincerely,</p>\n            <p>The {APP_NAME} Team</p>\n        </div>\n        <div class=\"footer\">\n            <p>&copy; 2025 {APP_NAME}. All rights reserved.</p>\n            <p>This is an automated email; please do not reply directly.</p>\n        </div>\n    </div>\n</body>\n</html>"
    }
  }, collection)

  return app.save(collection)
}, (app) => {
  const collection = app.findCollectionByNameOrId("_pb_users_auth_")

  // update collection data
  unmarshal({
    "verificationTemplate": {
      "body": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Email Verification - {APP_NAME}</title>\n    <style>\n        /* General Body Styles */\n        body {\n            font-family: 'Montserrat', 'Inter', sans-serif;\n            line-height: 1.6;\n            color: #ffffff; /* Default text color set to white */\n            margin: 0;\n            padding: 0;\n            background-color: #f8f9fa; /* Light background for the overall email container */\n        }\n        /* Container for the email content */\n        .email-container {\n            max-width: 600px;\n            margin: 20px auto;\n            background-color: #ffffff; /* Base white for rounded corners, but content body will be dark */\n            border-radius: 12px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n        /* Header Section */\n        .header {\n            background-color: #800000; /* Deep PUP Maroon */\n            color: #ffffff;\n            padding: 30px 25px;\n            text-align: center;\n            font-size: 28px;\n            font-weight: 800;\n            letter-spacing: 1px;\n            border-bottom: 3px solid #ffffff; /* White line below the header for strong separation */\n            line-height: 1.2;\n        }\n        /* Content Body Section - Dark background for white text */\n        .content-body {\n            background-color: #260000; /* Very dark maroon/brown shade, close to black for contrast */\n            color: #ffffff; /* Text color inside content body */\n            padding: 30px 25px;\n        }\n        /* Paragraph styles */\n        p {\n            margin-bottom: 15px;\n            font-size: 16px;\n            color: #ffffff; /* Ensure paragraphs are white */\n        }\n        /* Button Styling */\n        .button-container {\n            text-align: center;\n            margin-top: 35px;\n            margin-bottom: 35px;\n        }\n        .button {\n            display: inline-block;\n            padding: 15px 30px;\n            background-color: #800000; /* PUP Maroon */\n            color: #ffffff !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-size: 18px;\n            font-weight: bold;\n            transition: background-color 0.3s ease;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n        }\n        .button:hover {\n            background-color: #660000; /* Darker maroon on hover */\n        }\n        /* Footer Section */\n        .footer {\n            background-color: #f2f2f2; /* Light grey footer - provides contrast with dark body */\n            color: #777777;\n            padding: 20px 25px;\n            font-size: 13px;\n            text-align: center;\n            border-top: 1px solid #e0e0e0;\n            border-bottom-left-radius: 12px;\n            border-bottom-right-radius: 12px;\n        }\n        .footer p {\n            margin: 5px 0;\n            color: #777777; /* Ensure footer text is dark grey */\n        }\n        .link {\n            color: #ffffff; /* Links within the dark body should be white */\n            text-decoration: none;\n        }\n        .link:hover {\n            text-decoration: underline;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-container\">\n        <div class=\"header\">\n            {APP_NAME}\n        </div>\n        <div class=\"content-body\">\n            <p>Dear PUPTian,</p>\n            <p>We are delighted to welcome you to **{APP_NAME}**. To complete your registration and activate your account, please verify your email address by clicking the button below.</p>\n            <p>Email verification is a crucial step to ensure the security and integrity of your account within our system.</p>\n            <div class=\"button-container\">\n                <a class=\"button\" href=\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\" target=\"_blank\" rel=\"noopener\">Verify Your Email Address</a>\n            </div>\n            <p>This verification link is valid for a limited time. Please complete the process promptly.</p>\n            <p>If you did not initiate this registration or believe this email was sent in error, please disregard this message. No action is required on your part if you did not sign up for an account with us.</p>\n            <p>Sincerely,</p>\n            <p>The {APP_NAME} Team</p>\n        </div>\n        <div class=\"footer\">\n            <p>&copy; 2025 {APP_NAME}. All rights reserved.</p>\n            <p>This is an automated email; please do not reply directly.</p>\n        </div>\n    </div>\n</body>\n</html>"
    }
  }, collection)

  return app.save(collection)
})
