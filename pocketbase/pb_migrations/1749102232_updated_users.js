/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("_pb_users_auth_")

  // update collection data
  unmarshal({
    "verificationTemplate": {
      "body": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Email Verification - {APP_NAME}</title>\n    <style>\n        /* General Body Styles */\n        body {\n            font-family: 'Montserrat', 'Inter', sans-serif; /* Adding Montserrat for a slightly more academic feel, fallback to Inter */\n            line-height: 1.6;\n            color: #333333;\n            margin: 0;\n            padding: 0;\n            background-color: #f8f9fa; /* Light background for the email */\n        }\n        /* Container for the email content */\n        .email-container {\n            max-width: 600px;\n            margin: 20px auto;\n            background-color: #ffffff;\n            border-radius: 12px; /* Rounded corners for elegance */\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Slightly more prominent shadow */\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n        /* Header Section - Now pure Maroon, inspired by PUP's primary color */\n        .header {\n            background-color: #800000; /* Deep PUP Maroon */\n            color: #ffffff;\n            padding: 30px 25px; /* More padding for a bolder header */\n            text-align: center;\n            font-size: 28px; /* Larger font for impact */\n            font-weight: 800; /* Extra bold */\n            letter-spacing: 1px; /* Subtle spacing for professionalism */\n            border-bottom: 3px solid #660000; /* Slightly darker maroon line below the header */\n            line-height: 1.2;\n        }\n        /* Content Body Section */\n        .content-body {\n            padding: 30px 25px;\n        }\n        /* Paragraph styles */\n        p {\n            margin-bottom: 15px;\n            font-size: 16px;\n        }\n        /* Button Styling - Inspired by PUP Maroon */\n        .button-container {\n            text-align: center;\n            margin-top: 35px; /* More spacing above button */\n            margin-bottom: 35px; /* More spacing below button */\n        }\n        .button {\n            display: inline-block;\n            padding: 15px 30px; /* Slightly larger button */\n            background-color: #800000; /* PUP Maroon */\n            color: #ffffff !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-size: 18px;\n            font-weight: bold;\n            transition: background-color 0.3s ease;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* More prominent shadow for the button */\n        }\n        .button:hover {\n            background-color: #660000; /* Darker maroon on hover */\n        }\n        /* Footer Section */\n        .footer {\n            background-color: #f2f2f2; /* Light grey footer */\n            color: #777777;\n            padding: 20px 25px;\n            font-size: 13px;\n            text-align: center;\n            border-top: 1px solid #e0e0e0;\n            border-bottom-left-radius: 12px;\n            border-bottom-right-radius: 12px;\n        }\n        .footer p {\n            margin: 5px 0;\n        }\n        .link {\n            color: #800000; /* Maroon for links */\n            text-decoration: none;\n        }\n        .link:hover {\n            text-decoration: underline;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-container\">\n        <div class=\"header\">\n            {APP_NAME}\n        </div>\n        <div class=\"content-body\">\n            <p>Dear Valued User,</p>\n            <p>We are delighted to welcome you to **{APP_NAME}**. To complete your registration and activate your account, please verify your email address by clicking the button below.</p>\n            <p>Email verification is a crucial step to ensure the security and integrity of your account within our system.</p>\n            <div class=\"button-container\">\n                <a class=\"button\" href=\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\" target=\"_blank\" rel=\"noopener\">Verify Your Email Address</a>\n            </div>\n            <p>If the button above does not work, please copy and paste the following link into your web browser:</p>\n            <p><a class=\"link\" href=\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\" target=\"_blank\" rel=\"noopener\">{APP_URL}/_/#/auth/confirm-verification/{TOKEN}</a></p>\n            <p>This verification link is valid for a limited time. Please complete the process promptly.</p>\n            <p>If you did not initiate this registration or believe this email was sent in error, please disregard this message. No action is required on your part if you did not sign up for an account with us.</p>\n            <p>Sincerely,</p>\n            <p>The {APP_NAME} Team</p>\n        </div>\n        <div class=\"footer\">\n            <p>&copy; 2025 {APP_NAME}. All rights reserved.</p>\n            <p>This is an automated email; please do not reply directly.</p>\n        </div>\n    </div>\n</body>\n</html>"
    }
  }, collection)

  return app.save(collection)
}, (app) => {
  const collection = app.findCollectionByNameOrId("_pb_users_auth_")

  // update collection data
  unmarshal({
    "verificationTemplate": {
      "body": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Email Verification - {APP_NAME}</title>\n    <style>\n        /* General Body Styles */\n        body {\n            font-family: 'Montserrat', 'Inter', sans-serif; /* Adding Montserrat for a slightly more academic feel, fallback to Inter */\n            line-height: 1.6;\n            color: #333333;\n            margin: 0;\n            padding: 0;\n            background-color: #f8f9fa; /* Light background for the email */\n        }\n        /* Container for the email content */\n        .email-container {\n            max-width: 600px;\n            margin: 20px auto;\n            background-color: #ffffff;\n            border-radius: 12px; /* Rounded corners for elegance */\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Slightly more prominent shadow */\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n        /* Header Section - Inspired by PUP Blue */\n        .header {\n            background-color: #0047AB; /* Deep PUP Blue */\n            color: #ffffff;\n            padding: 30px 25px; /* More padding for a bolder header */\n            text-align: center;\n            font-size: 28px; /* Larger font for impact */\n            font-weight: 800; /* Extra bold */\n            letter-spacing: 1px; /* Subtle spacing for professionalism */\n            border-bottom: 3px solid #800000; /* Bold maroon line below the blue header */\n            line-height: 1.2;\n        }\n        /* Content Body Section */\n        .content-body {\n            padding: 30px 25px;\n        }\n        /* Paragraph styles */\n        p {\n            margin-bottom: 15px;\n            font-size: 16px;\n        }\n        /* Button Styling - Inspired by PUP Maroon */\n        .button-container {\n            text-align: center;\n            margin-top: 35px; /* More spacing above button */\n            margin-bottom: 35px; /* More spacing below button */\n        }\n        .button {\n            display: inline-block;\n            padding: 15px 30px; /* Slightly larger button */\n            background-color: #800000; /* PUP Maroon */\n            color: #ffffff !important;\n            text-decoration: none;\n            border-radius: 8px;\n            font-size: 18px;\n            font-weight: bold;\n            transition: background-color 0.3s ease;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* More prominent shadow for the button */\n        }\n        .button:hover {\n            background-color: #660000; /* Darker maroon on hover */\n        }\n        /* Footer Section */\n        .footer {\n            background-color: #f2f2f2; /* Light grey footer */\n            color: #777777;\n            padding: 20px 25px;\n            font-size: 13px;\n            text-align: center;\n            border-top: 1px solid #e0e0e0;\n            border-bottom-left-radius: 12px;\n            border-bottom-right-radius: 12px;\n        }\n        .footer p {\n            margin: 5px 0;\n        }\n        .link {\n            color: #800000; /* Maroon for links */\n            text-decoration: none;\n        }\n        .link:hover {\n            text-decoration: underline;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"email-container\">\n        <div class=\"header\">\n            {APP_NAME}\n        </div>\n        <div class=\"content-body\">\n            <p>Dear Valued User,</p>\n            <p>We are delighted to welcome you to **{APP_NAME}**. To complete your registration and activate your account, please verify your email address by clicking the button below.</p>\n            <p>Email verification is a crucial step to ensure the security and integrity of your account within our system.</p>\n            <div class=\"button-container\">\n                <a class=\"button\" href=\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\" target=\"_blank\" rel=\"noopener\">Verify Your Email Address</a>\n            </div>\n            <p>If the button above does not work, please copy and paste the following link into your web browser:</p>\n            <p><a class=\"link\" href=\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\" target=\"_blank\" rel=\"noopener\">{APP_URL}/_/#/auth/confirm-verification/{TOKEN}</a></p>\n            <p>This verification link is valid for a limited time. Please complete the process promptly.</p>\n            <p>If you did not initiate this registration or believe this email was sent in error, please disregard this message. No action is required on your part if you did not sign up for an account with us.</p>\n            <p>Sincerely,</p>\n            <p>The {APP_NAME} Team</p>\n        </div>\n        <div class=\"footer\">\n            <p>&copy; 2025 {APP_NAME}. All rights reserved.</p>\n            <p>This is an automated email; please do not reply directly.</p>\n        </div>\n    </div>\n</body>\n</html>"
    }
  }, collection)

  return app.save(collection)
})
